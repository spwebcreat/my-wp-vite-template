# ========================================
# My WP Vite Template - WP-CLI設定
# ========================================
# 
# 注意: これらのコマンドは、Localのサイトシェル内で実行してください
# 自動化されたセットアップは scripts/setup-local.sh を使用することを推奨

# === 基本設定 ===

# 日本語設定
wp core language install ja --activate

# タイムゾーン設定
wp option update timezone_string 'Asia/Tokyo'
wp option update date_format 'Y年n月j日'
wp option update time_format 'H:i'

# === クリーンアップ ===

# 不要記事の削除（エラーハンドリング付き）
wp post delete 1 2 3 --force 2>/dev/null || echo "デフォルト投稿が見つかりません"

# デフォルトプラグイン削除
wp plugin delete akismet hello 2>/dev/null || echo "デフォルトプラグインが見つかりません"

# === プラグインインストール ===

# 基本プラグイン
wp plugin install wp-multibyte-patch --activate
wp plugin install wp-pagenavi --activate
wp plugin install mw-wp-form --activate
wp plugin install custom-post-type-ui --activate
wp plugin install intuitive-custom-post-order --activate
wp plugin install duplicate-post --activate
wp plugin install custom-post-type-permalinks --activate

# セキュリティ・管理系プラグイン
wp plugin install siteguard --activate
wp plugin install backwpup --activate
wp plugin install google-sitemap-generator --activate
wp plugin install all-in-one-wp-migration --activate

# === ページ設定 ===

# ホームページ作成
HOME_ID=$(wp post create --post_type=page --post_title=Home --post_status=publish --porcelain)
wp option update page_on_front "$HOME_ID"
wp option update show_on_front page

# === パーマリンク設定 ===

# パーマリンク構造変更
wp rewrite structure '/%post_id%/'
wp rewrite flush

# === 開発用設定 ===

# デバッグ設定
wp config set WP_DEBUG true --raw
wp config set WP_DEBUG_LOG true --raw
wp config set WP_DEBUG_DISPLAY false --raw
wp config set SCRIPT_DEBUG true --raw

# === その他 ===

# 翻訳の更新
wp core language update

# 設定確認
wp option get permalink_structure
wp theme list --status=active